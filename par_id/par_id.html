
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../brake/brake.html">
      
      
        <link rel="next" href="../motor_cfg/motor_cfg.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.7">
    
    
      
        <title>Par ID - mappMotion samples</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="orange" data-md-color-accent="orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#repo-link" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="mappMotion samples" class="md-header__button md-logo" aria-label="mappMotion samples" data-md-component="logo">
      
  <img src="../images/bur.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mappMotion samples
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Par ID
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/br-automation-com/mappMotion-Samples" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="mappMotion samples" class="md-nav__button md-logo" aria-label="mappMotion samples" data-md-component="logo">
      
  <img src="../images/bur.png" alt="logo">

    </a>
    mappMotion samples
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/br-automation-com/mappMotion-Samples" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Start
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../structure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Structure
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../brake/brake.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Brake
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Par ID
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="par_id.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Par ID
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#repo-link" class="md-nav__link">
    Repo Link
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface-structure" class="md-nav__link">
    Interface structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#program-structure" class="md-nav__link">
    Program structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-code" class="md-nav__link">
    Sample code
  </a>
  
    <nav class="md-nav" aria-label="Sample code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#program-init" class="md-nav__link">
    Program init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#program-cyclic" class="md-nav__link">
    Program cyclic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#revision" class="md-nav__link">
    Revision
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../motor_cfg/motor_cfg.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motor Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../axis_cfg/axis_cfg.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Axis Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../drive_cfg/drive_cfg.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drive Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    References
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../refs/refs_motor_sync.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synchronous motor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../refs/refs_motor_ind_pp.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Induction motor power plate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../refs/refs_motor_ind_pp.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Induction motor star equivalent circuit
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../revision.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Revision
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Par ID</h1>

<p>The par ID sample provides a simplified interface to control the ACOPOS parameter IDs. Parameter IDs can be read or written once or cyclic. In addition there is a cyclic multiplexed mode where data is accessed continuously but not every cycle. The data type is derived from variable data type. Make sure that the variable data type matches the parameter ID data type. If the variable is none standard type (ex. array or structure) then the data type mcACPAX_PARTYPE_VOID is used.</p>
<p><img alt="" src="screenshot_web.png" /></p>
<p>Also see Automation Studio help </p>
<ul>
<li>(64f032b8-d12d-4fdf-a118-179256305dcf) for a complete list of parameter IDs.</li>
<li>(89221e8a-e9dd-427b-a12b-2b75d6f5fe83) for a description of MC_BR_ProcessParID_AcpAx</li>
<li>(b504b417-f0ed-4e98-914a-73b105a3931b) for a description of MC_BR_GetCyclicDataInfo_AcpAx</li>
</ul>
<h2 id="repo-link">Repo Link</h2>
<p><a href="https://github.com/br-automation-com/mappMotion-Samples/tree/par_id">Here</a> is the link to the repository.</p>
<h2 id="configuration">Configuration</h2>
<p>The sample can be configured through the following constants located in the VAR-file of the package.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Function</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>AxisParNum</td>
<td>Total number of parameter IDs</td>
<td>10</td>
</tr>
</tbody>
</table>
<h2 id="interface-structure">Interface structure</h2>
<p>The sample uses a variable structure to communicate with the outside world that can also be used to interact with other tasks. The structure looks as follows:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td>CmdUpdate</td>
<td>Update par id configuration.</td>
</tr>
<tr>
<td>MpLink</td>
<td>The axis reference establishes the connection between the function block and an axis.</td>
</tr>
<tr>
<td>ParIds</td>
<td>Array of parameters ID configurations. See details below.</td>
</tr>
<tr>
<td>MaxReadDataBytes</td>
<td>Maximum number of cyclic bytes used in read direction</td>
</tr>
<tr>
<td>MaxWriteDataBytes</td>
<td>Maximum number of cyclic bytes used in read direction</td>
</tr>
<tr>
<td>ErrId</td>
<td>Shows the first error that occurred in a parameter configuration. Data access will continue for all parameter IDs that are configured correct. The error ID must be reset with CmdResetError.</td>
</tr>
</tbody>
</table>
<h2 id="program-structure">Program structure</h2>
<p>Parameter access is configured in the sub structure ParIds</p>
<table>
<thead>
<tr>
<th>ParIds Structure</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr>
<td>Execute</td>
<td>This variable defines how the parameter ID is accessed. DONE indicates that one time access was finished. ONCE triggers as one time access. CYCLIC access transfers the data every task cycle. Keep in mind that the amount of data that can be transferred every cycle is limited. MULTI access transfers the data continuously as fast as possible but does not guaranty data access in every cycle.<br><br>- mcACPAX_PARID_DONE<br>- mcACPAX_PARID_GET_ONCE<br>- mcACPAX_PARID_SET_ONCE<br>- mcACPAX_PARID_GET_CYCLIC<br>- mcACPAX_PARID_SET_CYCLIC<br>- mcACPAX_PARID_GET_MULTI<br>- mcACPAX_PARID_SET_MULTI</td>
</tr>
<tr>
<td>Variable</td>
<td>Variable name as string. Use 'VariableName' for global variables and 'TaskName:VariableName' for local variables. Make sure that the variable data type matches the parameter ID data type.</td>
</tr>
<tr>
<td>ParID</td>
<td>Parameter ID number</td>
</tr>
</tbody>
</table>
<h2 id="sample-code">Sample code</h2>
<p>Here is a sample snippet that can be used as a starting point.</p>
<h5 id="program-init">Program init</h5>
<pre><code>    // --------------------------------------------------------------------------
    // Preset ParID module
    AxisParId.MpLink := ADR(gAxis_1);                               // MpLink for axis
    AxisParId.CmdUpdate := TRUE;

    // Acknowledge encoder battery error
    mcACPAX_UDINT := 1;                                             // Par ID value: reset encoder error
    AxisParId.ParIds[1].Execute := mcACPAX_PARID_SET_ONCE;          // Execute write command once
    AxisParId.ParIds[1].ParID := 719;                               // Par ID: encoder command
    AxisParId.ParIds[1].Variable := 'Axis_1:mcACPAX_UDINT';         // Variable as string

    // Read actual speed cyclic
    mcSPEED_ACTUAL := 0;                                            // Par ID value: actual speed
    AxisParId.ParIds[2].Execute := mcACPAX_PARID_GET_CYCLIC;        // Execute write command cyclic
    AxisParId.ParIds[2].ParID := 92;                                // Par ID: actual speed
    AxisParId.ParIds[2].Variable := 'Axis_1:mcSPEED_ACTUAL';        // Variable as string

    // Write maximum speed
    mcSPEED_MAX := 0;                                               // Par ID value: actul position
    AxisParId.ParIds[3].Execute := mcACPAX_PARID_DONE;              // Dont execute command automatically
    AxisParId.ParIds[3].ParID := 111;                               // Par ID: actul position
    AxisParId.ParIds[3].Variable := 'Axis_1:mcSPEED_MAX';           // Variable as string

END_PROGRAM
</code></pre>
<h5 id="program-cyclic">Program cyclic</h5>
<pre><code>PROGRAM _CYCLIC
    // --------------------------------------------------------------------------
    // Call axis actions used for this drive
    ParIDAction;

END_PROGRAM
</code></pre>
<h2 id="revision">Revision</h2>
<p>Version 8</p>
<ul>
<li>Fixed cyclic communication information </li>
<li>Increased drop down box width </li>
<li>Changed demo par ids</li>
</ul>
<p>Version 7</p>
<ul>
<li>Update mappMotion to 5.24</li>
<li>Removed obsolete hardware</li>
<li>Added new outputs MaxReadDataBytes and MaxWriteDataBytes that show how many bytes are used by cyclic communication</li>
</ul>
<p>Version 6</p>
<ul>
<li>Only get variable data on update</li>
<li>Removed CmdResetError</li>
<li>Added CmdUpdate</li>
<li>Update to mappMotion 5.23</li>
</ul>
<p>Version 5</p>
<ul>
<li>Update to mappMotion 5.22.1</li>
<li>Improved error handling</li>
</ul>
<p>Version 4</p>
<ul>
<li>Removed dependency from common</li>
<li>Added cyclic par id exchange</li>
<li>Simplified interface</li>
</ul>
<p>Version 3</p>
<ul>
<li>Renamed function block</li>
</ul>
<p>Version 2</p>
<ul>
<li>Renamed action</li>
</ul>
<p>Version 1</p>
<ul>
<li>First release</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": "toc.integrate", "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.aecac24b.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../javascripts/tablesort.js"></script>
      
    
  </body>
</html>